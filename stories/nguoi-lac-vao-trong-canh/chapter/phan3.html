
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
 <title>Pháº§n 3</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Serif&family=Playfair+Display:wght@600;700&display=swap"
    rel="stylesheet"
  >

  <!-- Style dÃ¹ng chung -->
  <link rel="stylesheet" href="../style.css">
</head>

<body class="page-chapter">
<body class="page-chapter">

  <!-- ===== NÃšT Má» THÆ¯ VIá»†N (TRÃI) ===== -->
  <div class="menu-toggle" onclick="toggleLibrary()">â˜°</div>

  <div class="overlay" id="overlay" onclick="toggleLibrary()"></div>

  <div class="library-sidebar" id="librarySidebar">
    <div class="library-header">
      ğŸ“š ThÆ° viá»‡n
      <span class="close-btn" onclick="toggleLibrary()">âœ•</span>
    </div>

    <input type="text" id="searchInput" placeholder="TÃ¬m truyá»‡n..." />
    <ul id="storyList"></ul>
  </div>


  <!-- ===== NÃšT Má» Má»¤C Lá»¤C (PHáº¢I) ===== -->
  <div class="chapter-menu-toggle" onclick="toggleChapterMenu()">ğŸ“‘</div>

  <div id="chapterOverlay" class="chapter-overlay" onclick="toggleChapterMenu()"></div>

  <div id="chapterSidebar" class="chapter-sidebar">
    <div class="chapter-sidebar-header">
      ğŸ“š Má»¥c lá»¥c
      <span class="close-btn" onclick="toggleChapterMenu()">âœ•</span>
    </div>

    <ul id="chapterList"></ul>
  </div>
<!-- ================= HEADER ================= -->
<div class="fixed-top">
  <div class="fixed-inner page-chapter">

    <!-- LEFT -->
    <div class="top-left">
      <a class="back-link" href="../index.html">ğŸ“‘ Má»¥c lá»¥c</a>
      <a class="back-link" href="../../../index.html">ğŸ  Trang chá»§</a>
      <a class="back-link" href="../../../thu-vien-ten/name-library.html">ğŸ“– ThÆ° viá»‡n tÃªn</a>
      <button id="bookmarkBtn" class="back-link">ğŸ“Œ Káº¹p sÃ¡ch</button>
    </div>
    <!-- CENTER -->
    <div class="novel-header top-center">
      <h1 class="novel-title">
        NgÆ°á»i Láº¡c VÃ o Trong Cáº£nh ã€Amuro Tooru Xem áº¢nh Thá»ƒã€‘
      </h1>
      <div class="novel-meta">
        <span>Pháº§n 3</span>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="top-right">
      <a class="back-link" href="phan2.html">â® ChÆ°Æ¡ng trÆ°á»›c</a>
      <a class="back-link" href="phan4.html">â­ ChÆ°Æ¡ng sau</a>
    </div>
  </div>
</div>

<!-- ================= CONTENT ================= -->
<main>
<div class="content chapter-content">


        <p>Táº¥t cáº£ má»i ngÆ°á»i cÃ¹ng sÆ°Æ¡ng mÃ¹ cáº£nh tÆ°á»£ng ná»™i ngÆ°á»i phÃ¡t ra Ä‘á»“ng dáº¡ng khiáº¿p sá»£ thanh Ã¢m: â€œA?!â€</p>
        <p>Hattori Heiji giáº­t mÃ¬nh mÃ  nÃ³i: â€œVá»‹ nÃ y Amuro Ä‘áº¡i ca, Ä‘Ã¢y chÃ­nh lÃ  ngÆ°Æ¡i thÆ°Æ¡ng nghiá»‡p cÆ¡ máº­t?!â€</p>
        <p>ã€ pháº£i khÃ´ngâ€¦â€¦Conan á»Ÿ biáº¿n thÃ nh Ä‘áº­u Ä‘áº­u máº¯t sau tÆ°á»Ÿng.</p>
        <p>â€œChÃ¢n giÃ² hun khÃ³i tuyá»ƒn tiá»‡n nghi liá»n háº£o, nhÆ°ng táº­n lá»±c muá»‘n tuyá»ƒn khÃ´ng cÃ³ dáº§u trÆ¡n cÃ¡i loáº¡i nÃ y.â€ Amuro Tooru á»Ÿ nhÃ  Äƒn trong phÃ²ng báº¿p báº¯t Ä‘áº§u dáº¡y dá»—.</p>
        <p>â€¦â€¦â€¦â€¦</p>
        <p>â€œBÃ­ quyáº¿t á»Ÿ chá»— sá»­ dá»¥ng cÃ¹ng nÆ°á»›c táº¯m Ä‘á»™ áº¥m khÃ´ng sai biá»‡t láº¯m nÆ°á»›c áº¥m, chá»‰ cáº§n nhÆ° váº­y trÆ°á»›c phao thá»§y, liá»n tÃ­nh qua má»™t Ä‘oáº¡n thá»i gian, rau xÃ  lÃ¡ch váº«n lÃ  cÃ³ thá»ƒ duy trÃ¬ sáº£ng giÃ²n vá»‹.â€ Amuro Tooru thÃ nh tháº¡o mÃ  cháº¿ tÃ¡c sandwich. ã€‘</p>
        <p>â€œGia há»a nÃ y tháº¿ nhÆ°ng khÃ´ng cÃ³ Ä‘em phÃ²ng báº¿p táº¡c rá»›t?!â€ Matsuda Jinpei táº¡c mao mÃ  nÃ³i.</p>
        <p>Hagiwara Kenji cÅ©ng cháº¥n kinh rá»“i: â€œThoáº¡t nhÃ¬n cÃ²n Äƒn ráº¥t ngon bá»™ dÃ¡ng!â€</p>
        <p>ã€Amuro, ngÆ°Æ¡i cá»©u cáº¡nh lÃ  tháº§n thÃ¡nh phÆ°Æ¡ng nÃ o a, Edogawa Conan lá»™ ra ná»­a thÃ¡ng máº¯t, á»Ÿ trong lÃ²ng nghÄ© Ä‘áº¿n. ã€‘</p>
        <p>â€œConan.â€ Conan bá»‹ hoáº£ng sá»£, quay Ä‘áº§u nhÃ¬n vá» phÃ­a Mouri Ran, Mouri Ran Ä‘á»‘i háº¯n nÃ³i: â€œMuá»‘n kÃªu Amuro ca ca, báº±ng khÃ´ng khÃ´ng lá»… phÃ©p nga.â€</p>
        <p>ã€ â€œChá»¯a khá»i máº¥u chá»‘t nháº¥t bÃ¡nh mÃ¬, dÃ¹ng cÃ¡i nÃ y bÃ¡nh mÃ¬ lÃ  Ä‘Æ°á»£c.â€ Amuro Tooru láº¥y ra má»™t bao bÃ¡nh mÃ¬.</p>
        <p>â€¦â€¦â€¦â€¦</p>
        <p>â€œHÆ¡n ná»¯a nhÆ° váº­y cÅ©ng cÃ³ thá»ƒ Ä‘Ã¨ tháº¥p phÃ­ tá»•n nga.â€</p>
        <p>Amuroâ€¦â€¦ NgÆ°Æ¡i cÅ©ng thá»±c nghiÃªm tÃºc mÃ  á»Ÿ lÃ m quÃ¡n cÃ  phÃª cÃ´ng tÃ¡c Ä‘i, Edogawa Conan nhÃ¬n Amuro Tooru biá»ƒu tÃ¬nh, á»Ÿ trong lÃ²ng yÃªn láº·ng nghÄ© Ä‘áº¿n. ã€‘</p>
        <p>QuÃ¡n cÃ  phÃª cÃ´ng tÃ¡c? Morofushi Hiromitsu mang theo suy nghÄ© nhÃ¬n vá» phÃ­a Edogawa Conan, Ä‘á»©a nhá» nÃ y cÃ³ pháº£i hay khÃ´ng biáº¿t chÃºt cÃ¡i gÃ¬.</p>
        <p>Amuro Tooru cÅ©ng nheo láº¡i háº¯n hai máº¯t, quáº£ nhiÃªnâ€¦â€¦ Äá»©a nhá» nÃ y khÃ´ng Ä‘Æ¡n giáº£n sao.</p>
        <p>ã€â€¦â€¦â€¦â€¦</p>
        <p>â€œCho nÃªn, cho nÃªn, thá»‰nh lÃ m Æ¡n ngÃ i lÃ m chÃºng ta tiá»‡m bÃ¡nh mÃ¬ cÅ©ng bÃ¡n ra loáº¡i nÃ y sandwich Ä‘i!â€ BÃ¡nh mÃ¬ sÆ° phÃ³ gá»¡ xuá»‘ng mÅ©, nghiÃªm tÃºc mÃ  nÃ³i.</p>
        <p>â€œThÃºc, thÃºc thÃºc, láº¡i nÃ³i nhÆ° tháº¿ nÃ o yÃªu cáº§u nÃ y Ä‘á»uâ€¦â€¦â€</p>
        <p>â€œKhÃ´ng thÃ nh váº¥n Ä‘á» a.â€ Conan nÃ³i khÃ´ng nÃ³i xong, Amuro Tooru liá»n Ä‘Ã¡p á»©ng rá»“i: â€œKhÃ³ Ä‘Æ°á»£c ngÆ°Æ¡i nhÆ° váº­y thÃ­ch ta lÃ m loáº¡i nÃ y chÃ¢n giÃ² hun khÃ³i sandwich, ta chÃ­nh lÃ  hy vá»ng bÃ¡n cho ngÆ°á»i nhÆ° váº­y.â€ ã€‘</p>
        <p>â€œOa, Amuro tiÃªn sinh háº£o soÃ¡i a!â€ Suzuki Sonoko Ä‘Ã´i tay phá»§ng tháº§m nghÄ©, má»™t bÃªn Kyogoku Makoto ghen.</p>
        <p>Suzuki Sonoko vÆ°Æ¡n tay chá»c chá»c Mouri Ran: â€œNgÆ°Æ¡i nÃ³i Ä‘Ãºng khÃ´ng, tiá»ƒu lan.â€</p>
        <p>â€œXÃ¡c tháº­t.â€</p>
        <p>LÃºc nÃ y Ä‘áº¿n phiÃªn Edogawa Conan ghen tá»‹.</p>
        <p>SÆ°Æ¡ng tráº¯ng láº¡i láº§n ná»¯a biáº¿n áº£o, láº§n nÃ y, Ä‘áº§u tiÃªn xuáº¥t hiá»‡n chÃ­nh lÃ  bá»‹ báº¯t cÃ³c Conan, sau Ä‘Ã³:</p>
        <p>ã€ cÃ¡i gÃ¬, Ä‘Ã¢y lÃ  cÃ¡i gÃ¬, Haibara Ai ngá»“i á»Ÿ gháº¿ sau vá»‹, biá»ƒu tÃ¬nh hoáº£ng sá»£, cÃ¡i nÃ y cáº£m giÃ¡c, cÃ³ cÃ¡i gÃ¬, cÃ³ ngÆ°á»i nÃ o á»Ÿ truy chÃºng ta! ã€‘</p>
        <p>Äáº¡i gia cÅ©ng bá»‹ lÃ m Ä‘áº¿n kháº©n trÆ°Æ¡ng lÃªn, nhÆ°ng cÅ©ng vÃ´ phÃ¡p, chá»‰ cÃ³ thá»ƒ tiáº¿p tá»¥c xem Ä‘i xuá»‘ng:</p>
        <p>ã€ â€œKhÃ´ng cáº§n lá»™ ra cÃ¡i loáº¡i nÃ y biá»ƒu tÃ¬nh sao, trá»‘n khÃ´ng thoÃ¡t Ä‘Ã¢u.â€ Okiya ngáº©ng máº¯t kÃ­nh pháº£n quang, â€œTiáº¿n sÄ©, tay lÃ¡i giao cho ngÆ°Æ¡i!â€</p>
        <p>â€œAi? CÃ¡i gÃ¬ tay lÃ¡i, ngáº©ng tiÃªn sinh?â€ Tiáº¿n sÄ© khÃ´ng cÃ³ pháº£n á»©ng láº¡i Ä‘Ã¢y, Okiya ngáº©ng liá»n kÃ©o ra cá»­a xe, Ä‘á»‹nh nhÃ£n vá» phÃ­a trÆ°á»›c nhÃ¬n láº¡i, bÃ n tay nháº­p Ã¡o khoÃ¡c trung, nhÆ° lÃ  muá»‘n xuáº¥t ra cÃ¡i gÃ¬.</p>
        <p>NhÆ°ng vÃ o lÃºc nÃ y, má»™t chiáº¿c xe Ä‘uá»•i ká»‹p tiáº¿n Ä‘áº¿n, Okiya ngáº©ng quay Ä‘áº§u, cÃ¹ng trong xe Amuro Tooru Ä‘á»‘i diá»‡n ã€‘</p>


<!-- ===== NAV DÆ¯á»šI ===== -->
<div class="nav">
      <a class="back-link" href="../index.html">ğŸ“‘ Má»¥c lá»¥c</a>
      <a class="back-link" href="../../../index.html">ğŸ  Trang chá»§</a>
      <a class="back-link" href="../../../thu-vien-ten/name-library.html">ğŸ“– ThÆ° viá»‡n tÃªn</a>
      <a class="back-link" href="phan2.html">â® ChÆ°Æ¡ng trÆ°á»›c</a>
      <a class="back-link" href="phan4.html">â­ ChÆ°Æ¡ng sau</a>
</div>
  </main>
<!-- ================= BOOKMARK ================= -->
<script>
const NOVEL_ID = "nguoi-lac-vao-trong-canh";
const NOVEL_TITLE = "NgÆ°á»i Láº¡c VÃ o Trong Cáº£nh ã€Amuro Tooru Xem áº¢nh Thá»ƒã€‘";
const CHAPTER_TITLE = "Pháº§n 3";
const btn = document.getElementById("bookmarkBtn");
function getBookmarks() {
  return JSON.parse(localStorage.getItem("bookmarks")) || {};
}
function isBookmarked() {
  return !!getBookmarks()[NOVEL_ID];
}
function updateButton() {
  const marked = isBookmarked();
  btn.textContent = marked ? "âœ… ÄÃ£ káº¹p" : "ğŸ“Œ Káº¹p sÃ¡ch";
  btn.classList.toggle("active", marked);
}
function toggleBookmark() {
  const bookmarks = getBookmarks();
  if (bookmarks[NOVEL_ID]) {
    delete bookmarks[NOVEL_ID];
    alert("âŒ ÄÃ£ bá» káº¹p sÃ¡ch");
  } else {
    bookmarks[NOVEL_ID] = {
      novelTitle: NOVEL_TITLE,
      chapterTitle: CHAPTER_TITLE,
      url: location.href,
      time: Date.now()
    };
    alert("ğŸ“Œ ÄÃ£ lÆ°u chÆ°Æ¡ng Ä‘ang Ä‘á»c");
  }
  localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
  updateButton();
}
updateButton();
btn.addEventListener("click", toggleBookmark);
</script>
<!-- ================= HEADER SHRINK ================= -->
<script>
document.addEventListener("DOMContentLoaded", function () {

  /* =========================
     HEADER SHRINK + PADDING
  ========================== */

  const fixedHeader = document.querySelector(".fixed-top");
  const main = document.querySelector("main");

  function adjustMainPadding() {
    if (!fixedHeader || !main) return;
    main.style.paddingTop = fixedHeader.offsetHeight + 20 + "px";
  }

  function handleHeaderShrink() {
    if (!fixedHeader) return;
    fixedHeader.classList.toggle("shrink", window.scrollY > 80);
    adjustMainPadding();
  }

  window.addEventListener("scroll", handleHeaderShrink);
  window.addEventListener("resize", adjustMainPadding);
  adjustMainPadding();


  /* =========================
     SIDEBAR THÆ¯ VIá»†N (TRÃI)
  ========================== */

  const sidebar = document.getElementById("librarySidebar");
  const overlay = document.getElementById("overlay");
  const storyList = document.getElementById("storyList");
  const searchInput = document.getElementById("searchInput");

  function toggleLibrary() {
    if (!sidebar || !overlay) return;
    sidebar.classList.toggle("active");
    overlay.classList.toggle("active");
  }

  window.toggleLibrary = toggleLibrary;

  let storiesData = [];

  fetch("../../../stories.json")
    .then(res => res.json())
    .then(data => {
      storiesData = data;
      renderStories(data);
    })
    .catch(err => console.error("Lá»—i load stories.json:", err));

  function renderStories(data) {
    if (!storyList) return;

    storyList.innerHTML = "";

    const pathParts = window.location.pathname.split("/");
    const currentSlug = pathParts[2];

    data.forEach((story, index) => {
      const li = document.createElement("li");
      li.style.animationDelay = `${Math.min(index * 0.03, 0.3)}s`;

      const a = document.createElement("a");
      a.href = `/web-doc-truyen/stories/${story.slug}/`;
      a.textContent = `${story.title} (${story.chapters} chÆ°Æ¡ng)`;

      if (story.slug === currentSlug) {
        a.style.background = "#e0e7ff";
      }

      li.appendChild(a);
      storyList.appendChild(li);
    });
  }

  if (searchInput) {
    searchInput.addEventListener("input", function () {
      const keyword = this.value.toLowerCase();
      const filtered = storiesData.filter(story =>
        story.title.toLowerCase().includes(keyword)
      );
      renderStories(filtered);
    });
  }


  /* =========================
     SIDEBAR Má»¤C Lá»¤C CHÆ¯Æ NG (PHáº¢I)
  ========================== */

  const chapterSidebar = document.getElementById("chapterSidebar");
  const chapterOverlay = document.getElementById("chapterOverlay");
  const chapterList = document.getElementById("chapterList");

  function toggleChapterMenu() {
    if (!chapterSidebar || !chapterOverlay) return;
    chapterSidebar.classList.toggle("active");
    chapterOverlay.classList.toggle("active");
  }

  window.toggleChapterMenu = toggleChapterMenu;

  if (chapterList) {
    fetch("../index.html")
      .then(res => res.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");

        const toc = doc.querySelector(".content ul");
        if (!toc) return;

        const currentPage = window.location.pathname.split("/").pop();

        toc.querySelectorAll("li").forEach(li => {
          const a = li.querySelector("a");
          if (!a) return;

          let href = a.getAttribute("href");

          if (href.startsWith("chapter/")) {
            href = href.replace("chapter/", "");
          }

          const newLi = document.createElement("li");
          const newA = document.createElement("a");

          newA.href = href;
          newA.textContent = a.textContent;

          if (href === currentPage) {
            newA.style.background = "#e0e7ff";
          }

          newLi.appendChild(newA);
          chapterList.appendChild(newLi);
        });
      })
      .catch(err => console.error("KhÃ´ng load Ä‘Æ°á»£c má»¥c lá»¥c:", err));
  }

});
</script>
</body>
</html>
