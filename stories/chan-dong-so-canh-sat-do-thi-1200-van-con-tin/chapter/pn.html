
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
 <title>PhiÃªn Ngoáº¡i</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Serif&family=Playfair+Display:wght@600;700&display=swap"
    rel="stylesheet"
  >

  <!-- Style dÃ¹ng chung -->
  <link rel="stylesheet" href="../style.css">
</head>

<body class="page-chapter">
<body class="page-chapter">

  <!-- ===== NÃšT Má» THÆ¯ VIá»†N (TRÃI) ===== -->
  <div class="menu-toggle" onclick="toggleLibrary()">â˜°</div>

  <div class="overlay" id="overlay" onclick="toggleLibrary()"></div>

  <div class="library-sidebar" id="librarySidebar">
    <div class="library-header">
      ğŸ“š ThÆ° viá»‡n
      <span class="close-btn" onclick="toggleLibrary()">âœ•</span>
    </div>

    <input type="text" id="searchInput" placeholder="TÃ¬m truyá»‡n..." />
    <ul id="storyList"></ul>
  </div>


  <!-- ===== NÃšT Má» Má»¤C Lá»¤C (PHáº¢I) ===== -->
  <div class="chapter-menu-toggle" onclick="toggleChapterMenu()">ğŸ“‘</div>

  <div id="chapterOverlay" class="chapter-overlay" onclick="toggleChapterMenu()"></div>

  <div id="chapterSidebar" class="chapter-sidebar">
    <div class="chapter-sidebar-header">
      ğŸ“š Má»¥c lá»¥c
      <span class="close-btn" onclick="toggleChapterMenu()">âœ•</span>
    </div>

    <ul id="chapterList"></ul>
  </div>
<!-- ================= HEADER ================= -->
<div class="fixed-top">
  <div class="fixed-inner page-chapter">

    <!-- LEFT -->
    <div class="top-left">
      <a class="back-link" href="../index.html">ğŸ“‘ Má»¥c lá»¥c</a>
      <a class="back-link" href="../../../index.html">ğŸ  Trang chá»§</a>
      <a class="back-link" href="../../../thu-vien-ten/name-library.html">ğŸ“– ThÆ° viá»‡n tÃªn</a>
      <button id="bookmarkBtn" class="back-link">ğŸ“Œ Káº¹p sÃ¡ch</button>
    </div>
    <!-- CENTER -->
    <div class="novel-header top-center">
      <h1 class="novel-title">
        Cháº¥n Äá»™ng Sá»Ÿ Cáº£nh SÃ¡t ÄÃ´ Thá»‹ 1200 Váº¡n Con Tin ã€Xem áº¢nh Thá»ƒã€‘
      </h1>
      <div class="novel-meta">
        <span>PhiÃªn Ngoáº¡i</span>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="top-right">
      <a class="back-link" href="phan11.html">â® ChÆ°Æ¡ng trÆ°á»›c</a>
    </div>
  </div>
</div>

<!-- ================= CONTENT ================= -->
<main>
<div class="content chapter-content">


        <p>â€ƒâ€ƒ0.</p>
        <p>â€ƒâ€ƒ xem áº£nh káº¿t thÃºc, thÃ nh viÃªn Ä‘Ã£ toÃ n bá»™ pháº£n há»“i Ä‘áº¿n tháº¿ giá»›i hiá»‡n thá»±c.</p>
        <p>â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ1.â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ ra váº¥n Ä‘á» lá»›n, cháº¿t mÃ  sá»‘ng láº¡i ngÆ°á»i thÃ¢n pháº­n lÃ m sao bÃ¢y giá»?! â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ khÃ´ng biáº¿t lÃ  Ã½ trá»i váº«n lÃ  ngoÃ i Ã½ muá»‘n, máº¥t Ä‘i bá»‘n ngÆ°á»i toÃ n bá»™ vá» tá»›i Furuya Rei chung cÆ°, má»™t ngÆ°á»i cÆ° phÃ²ng láº­p tá»©c cÃ³ váº» háº¹p hÃ²i lÃªn. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ Ã½ thá»©c thu há»“i tÃ³c vÃ ng cáº£nh sÃ¡t Ã´m cháº·t láº¥y máº¥y cÃ¡i báº¡n tá»‘t, tháº­t tá»‘t, khÃ´ng pháº£i má»™ng. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ máº¥y vÃ²ng thÆ°Æ¡ng nghá»‹ lÃºc sau, bá»n há» quyáº¿t Ä‘á»‹nh Ä‘em ká»‹ch báº£n cáº£i biÃªn vÃ¬: ÄoÃ¡n ra tÃ¬nh huá»‘ng máº¥y ngÆ°á»i Ä‘á»‘i cÃ²n á»Ÿ náº±m vÃ¹ng Ä‘á»“ng ká»³ khÃ´ng an tÃ¢m, â€œCháº¿t giáº£â€ sau dá»©t khoÃ¡t tÆ°Æ¡ng káº¿ tá»±u káº¿, mai danh áº©n tÃ­ch phá»¥ trá»£ Furuya Rei, cho tá»›i bÃ¢y giá» nhiá»‡m vá»¥ hoÃ n thÃ nh. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ biáº¿t chÃ¢n tháº­t tÃ¬nh huá»‘ng ngÆ°á»i cÆ¡ báº£n Ä‘á»u cÃ³ xem áº£nh, khÃ´ng á»Ÿ hiá»‡n trÆ°á»ng cÅ©ng sáº½ khÃ´ng nghÄ© nhiá»u cÃ¡i gÃ¬, rá»‘t cuá»™c Ä‘áº¡i ngÆ°á»i sá»‘ng Ä‘á»u háº£o háº£o á»Ÿ trÆ°á»›c máº·t Ä‘á»©ng Ä‘Ã¢uâ€¦â€¦â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ hoÃ n má»¹ tÃ¬m tá»«, sá»­ máº¥y ngÆ°á»i Ä‘áº¡t Ä‘Æ°á»£c thÆ°á»£ng cáº¥p má»™t Ä‘á»‘n thoÃ¡ máº¡ tá»•ng sá»‘ khÃ´ng rÃµ muá»‘n ná»™p lÃªn bÃ¡o cÃ¡o, liá»n vÃ´ tá»™i cÃ´ng an cÅ©ng chÆ°a cÃ³ thá»ƒ may máº¯n thoÃ¡t khá»i.</p>
        <p>â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ2.â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ trá»Ÿ vá» Ä‘áº¿n sinh hoáº¡t háº±ng ngÃ y Hagiwara Kenji há»i osananajimi: â€œTiá»ƒu Jinpei ngÆ°Æ¡i cÃ²n pháº£i vá» Ä‘áº¿n báº¡o chá»— tá»• sao? Ká»³ tháº­t Ä‘i Ä‘iá»u tra khÃ³a cÅ©ng khÃ´ng tá»“i, cÃ²n cÃ³ thá»ƒ Ä‘i bá»“i bá»“i lá»›p trÆ°á»Ÿng.â€ â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ â€œÄÆ°Æ¡ng nhiÃªn pháº£i Ä‘i vá».â€ Matsuda Jinpei khÃ´ng ráº£nh suy tÆ°, nhÆ°á»›ng mÃ y, â€œNgÆ°Æ¡i sáº½ khÃ´ng sá»£ hÃ£i Ä‘i, thu?â€ â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ â€œSao cÃ³ thá»ƒ â€”â€”!â€ â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ vÃ¬ tháº¿, trá»Ÿ vá» báº¡o chá»— vÆ°Æ¡ng bÃ i Hagiwara Kenji nhÃ¬n cÆ¡ há»“ táº¥t cáº£ Ä‘á»u lÃ  ngÆ°á»i xa láº¡ vÄƒn phÃ²ng: â€œQuáº£ nhiÃªn thiáº¿u sá»‘ng báº£y nÄƒm váº«n lÃ  cÃ³ Ä‘iá»ƒm khÃ³ chá»‹u a.â€</p>
        <p>â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ3.</p>
        <p>â€ƒâ€ƒ khÃ´ng quÃ¡ máº¥y ngÃ y, má»™t cÃ¡i tin tá»©c Ã¡nh vÃ o má»i ngÆ°á»i mi máº¯t: â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ ná»•i danh ná»¯ tinh Sharon Vineyard chi ná»¯ ChrisÂ·Vineyard máº¥t tÃ­ch, sinh tá»­ khÃ´ng rÃµ, cáº£nh sÃ¡t cÃ²n táº¡i toÃ n lá»±c truy tra. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ cáº£m kÃ­ch ngÆ°á»i Edogawa Conan cÃ¹ng Mouri Ran Ä‘á»‘i nÃ y trong lÃ²ng cÃ³ chÃºt chua xÃ³t; lÃ m tiá»n Ä‘á»“ng sá»± Furuya Rei tá» váº», xem ra muá»‘n láº¡i báº¯t láº¥y nÃ ng cÃ³ chÃºt khÃ³ khÄƒn. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ khÃ´ng biáº¿t cÃ³ tÃ­nh khÃ´ng â€œTrÆ°á»›câ€ báº¡n tá»‘t Kudo Yukiko biá»ƒu tÃ¬nh lÃ m ngÆ°á»i nhÃ¬n khÃ´ng tháº¥u: â€œÄÃ¢y lÃ  ngÆ°Æ¡i lá»±a chá»n sao, Sharon.â€</p>
        <p>â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ4.â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ Ä‘Æ°á»£c Ä‘áº¿n láº§n thá»© hai sinh má»‡nh máº¥y ngÆ°á»i tá»± nhiÃªn lÃ  pháº£i vá» nhÃ  má»™t chuyáº¿n, ngÆ°á»i nhÃ  Ä‘á»u lÃ  vá»«a má»«ng vá»«a sá»£. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒHagiwara gia bá»Ÿi vÃ¬ Hagiwara Chihaya trÆ°á»›c tiÃªn cáº£m kÃ­ch, sá»›m liá»n lÃ m tá»‘t chuáº©n bá»‹, Ã´n nhu bá»‘n phÃ­a. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒMatsuda trÆ°á»£ng quÃ¡ lang khiáº¿p sá»£, trong miá»‡ng máº¯ng â€œHá»—n tiá»ƒu tá»­â€, trong máº¯t nÆ°á»›c máº¯t láº¡i nhÆ° tháº¿ nÃ o cÅ©ng sÃ¡t khÃ´ng lÃ m. â€ƒ</p>
        <p>â€ƒâ€ƒMorofushi Hiromitsu Ä‘i Nagano, gáº·p Ä‘Æ°á»£c bao gá»“m ca ca á»Ÿ bÃªn trong Nagano ba ngÆ°á»i tá»•, cÅ©ng coi nhÆ° Ä‘oÃ n tá»¥ má»™t phen. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ mÃ  Date Wataru? A, Ä‘Ã£ chuáº©n bá»‹ Ä‘Ã­nh hÃ´n. ÄÃ£ tráº£i qua nhÆ° váº­y má»™t chuyáº¿n, vÃ´ luáº­n lÃ  háº¯n cÃ¹ng Natalie, váº«n lÃ  hai bÃªn cha máº¹, Ä‘á»u cáº£m tháº¥y muá»‘n nhÃ¢n lÃºc cÃ²n sá»›m lÃ m háº£o. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ5.â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ sau Ä‘Ã³ khÃ´ng lÃ¢u, giáº£i dÆ°á»£c Ä‘Ã£ nghiÃªn cá»©u cháº¿ táº¡o ra tá»›i, báº¥t quÃ¡ bá»Ÿi vÃ¬ cÃ²n khÃ´ng cÃ³ ngÆ°á»i náº¿m thá»­ quÃ¡, nhÆ° cÅ© á»Ÿ vÃ o thá»­ dÃ¹ng giai Ä‘oáº¡n. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ nghe Ä‘Æ°á»£c tin tá»©c Edogawa Conan khÃ´ng mÃ ng báº¡n gÃ¡i ngÄƒn trá»Ÿ, hÆ°ng pháº¥n mÃ  toÃ n bá»™ cháº¡y Ä‘áº¿n tiáº¿n sÄ© Agasa gia, hÆ°á»›ng Haibara Ai Ä‘Ã²i láº¥y giáº£i dÆ°á»£c, tranh Ä‘Æ°Æ¡ng vÄ©nh cá»­u khÃ´i phá»¥c thÃ¢n thá»ƒ Ä‘á»‡ nháº¥t nhÃ¢n. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ luÃ´n luÃ´n sá»©c quan sÃ¡t ráº¥t máº¡nh háº¯n khÃ´ng chÃº Ã½ tá»›i trÃ  phÃ¡t ná»¯ hÃ i trong máº¯t chá»£t lÃ³e mÃ  qua ká»³ quÃ¡i cáº£m xÃºc, nÃ ng biáº¿t chÃ­nh mÃ¬nh khÃ´ng lay chuyá»ƒn Ä‘Æ°á»£c, cuá»‘i cÃ¹ng váº«n lÃ  Ä‘em giáº£i dÆ°á»£c cho háº¯n. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ báº¯t Ä‘Æ°á»£c giáº£i dÆ°á»£c Conan nhÆ° lÃ  phá»§ng cÃ¡i gÃ¬ hi tháº¿ trÃ¢n báº£o, gáº¥p khÃ´ng chá» ná»•i mÃ  nuá»‘t xuá»‘ng Ä‘i, khÃ´ng há» cÃ³ do dá»±. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ â€œChÃºc ngÆ°Æ¡i váº­n may, Ä‘áº¡i trinh thÃ¡m.â€</p>
        <p>â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ6.â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ thÃ nh cÃ´ng khÃ´i phá»¥c thÃ¢n thá»ƒ Kudo Shinichi muá»‘n thá»±c hiá»‡n chÃ­nh mÃ¬nh lá»i há»©a, mang báº¡n gÃ¡i Ä‘i Tropical nháº¡c viÃªn â€”â€” háº¿t tháº£y báº¯t Ä‘áº§u Ä‘á»‹a phÆ°Æ¡ng. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ ngÃ´â€¦ CÃ¡i nÃ y lÃ  lan chÃ­nh mÃ¬nh tuyá»ƒn. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ láº§n nÃ y Kudo Shinichi khÃ³ Ä‘Æ°á»£c khÃ´ng cÃ³ váº«n luÃ´n láº£i nháº£i vá» â€œHolmesâ€ chuyá»‡n xÆ°a, hai ngÆ°á»i thoáº¡t nhÃ¬n tháº­t Ä‘Ãºng lÃ  giá»‘ng táº¡i tiáº¿n hÃ nh lá»‡nh nhÃ¢n tÃ¢m Ä‘á»™ng háº¹n hÃ². â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ háº¯n nhÃ¬n nhÃ¬n Ä‘á»“ng há»“, lÃ´i kÃ©o báº¡n gÃ¡i cháº¡y lÃªn, Mouri Ran tá»©c kháº¯c minh báº¡ch chÃ­nh mÃ¬nh pháº£i bá»‹ mang Ä‘i nÆ¡i nÃ o, cháº³ng qua nÃ ng khÃ´ng nghÄ© tá»›i nÃ y sáº½ lÃ  láº§n nÃ y háº¹n hÃ² khÃ³ nháº¥t quÃªn kinh há»‰. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ cá»™t nÆ°á»›c phun khá»Ÿi, cuá»™n sÃ³ng háº¿t Ä‘á»£t nÃ y Ä‘áº¿n Ä‘á»£t khÃ¡c, Ä‘em hai ngÆ°á»i bao phá»§ á»Ÿ suá»‘i phun trung tÃ¢m. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ chung quanh Ã¡nh máº·t trá»i bá»‹ hÆ¡i nÆ°á»›c chiáº¿t xáº¡ thÃ nh mÃ u sáº¯c rá»±c rá»¡, trong Ä‘Ã³ nháº¥t lÃ³a máº¯t má»™t bÃ³ Ä‘Ã¡nh vÃ o trÆ°á»›c máº¯t thiáº¿u niÃªn trÃªn ngÆ°á»i. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ bá»‘n máº¯t nhÃ¬n nhau. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ trÆ°á»›c Ä‘Ã³ chuáº©n bá»‹ tá»‘t lá»i ká»‹ch Kudo Shinichi láº¡i má»™t cÃ¢u cÅ©ng nÃ³i khÃ´ng nÃªn lá»i, cuá»‘i cÃ¹ng dá»©t khoÃ¡t trá»±c tiáº¿p dÃ¹ng bÃ n tay to xoa nÃ ng Ä‘Ã´i máº¯t, thiáº¿u niÃªn thanh triá»‡t thanh Ã¢m Ä‘á»ƒ lá»™ ra vÃ i pháº§n kháº©n trÆ°Æ¡ng: â€œLanâ€¦ Nháº¯m máº¯t.â€</p>
        <p>â€ƒâ€ƒ ngay sau Ä‘Ã³ rÆ¡i xuá»‘ng chuá»“n chuá»“n lÆ°á»›t nÆ°á»›c má»™t hÃ´n. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ nÃ y má»™t cÃ¡i chá»›p máº¯t, Mouri Ran bá»—ng nhiÃªn nghÄ© Ä‘áº¿n, cÅ©ng lÃ  á»Ÿ cÃ¡i nÃ y nháº¡c viÃªn, Edogawa Conan tá»«ng Ä‘á»‘i nÃ ng nÃ³i: â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ â€œBá»Ÿi vÃ¬ ta thÃ­ch ngÆ°Æ¡i, ta so báº¥t luáº­n cÃ¡i gÃ¬ má»™t ngÆ°á»i Ä‘á»u thÃ­ch ngÆ°Æ¡i.â€ â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒ chuyá»‡n xÆ°a tá»« nÆ¡i nÃ y báº¯t Ä‘áº§u, vÄ©nh viá»…n sáº½ khÃ´ng káº¿t thÃºc. â€ƒâ€ƒ</p>
        <p>â€ƒâ€ƒâ”€â”€â”€â”€â”€</p>
        <p>â€ƒâ€ƒ rá»‘t cuá»™c káº¿t thÃºc láº¡p! Gáº§n hai thÃ¡ng rÆ°á»¡i khÃ´ng nghÄ© tá»›i chÃ­nh mÃ¬nh tháº¿ nhÆ°ng tháº­t sá»± cÃ³ thá»ƒ viáº¿t xong nhiá»u nhÆ° váº­y (Oâˆ†O)</p>
        <p>â€ƒâ€ƒ lÃºc sau cÃ³ thá»i gian cÃ²n sáº½ tu vÄƒn</p>



<!-- ===== NAV DÆ¯á»šI ===== -->
<div class="nav">
      <a class="back-link" href="../index.html">ğŸ“‘ Má»¥c lá»¥c</a>
      <a class="back-link" href="../../../index.html">ğŸ  Trang chá»§</a>
      <a class="back-link" href="../../../thu-vien-ten/name-library.html">ğŸ“– ThÆ° viá»‡n tÃªn</a>
      <a class="back-link" href="phan11.html">â® ChÆ°Æ¡ng trÆ°á»›c</a>
</div>
  </main>
<!-- ================= BOOKMARK ================= -->
<script>
const NOVEL_ID = "chan-dong-so-canh-sat-do-thi-1200-van-con-tin";
const NOVEL_TITLE = "Cháº¥n Äá»™ng Sá»Ÿ Cáº£nh SÃ¡t ÄÃ´ Thá»‹ 1200 Váº¡n Con Tin ã€Xem áº¢nh Thá»ƒã€‘";
const CHAPTER_TITLE = "PhiÃªn Ngoáº¡i";
const btn = document.getElementById("bookmarkBtn");
function getBookmarks() {
  return JSON.parse(localStorage.getItem("bookmarks")) || {};
}
function isBookmarked() {
  return !!getBookmarks()[NOVEL_ID];
}
function updateButton() {
  const marked = isBookmarked();
  btn.textContent = marked ? "âœ… ÄÃ£ káº¹p" : "ğŸ“Œ Káº¹p sÃ¡ch";
  btn.classList.toggle("active", marked);
}
function toggleBookmark() {
  const bookmarks = getBookmarks();
  if (bookmarks[NOVEL_ID]) {
    delete bookmarks[NOVEL_ID];
    alert("âŒ ÄÃ£ bá» káº¹p sÃ¡ch");
  } else {
    bookmarks[NOVEL_ID] = {
      novelTitle: NOVEL_TITLE,
      chapterTitle: CHAPTER_TITLE,
      url: location.href,
      time: Date.now()
    };
    alert("ğŸ“Œ ÄÃ£ lÆ°u chÆ°Æ¡ng Ä‘ang Ä‘á»c");
  }
  localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
  updateButton();
}
updateButton();
btn.addEventListener("click", toggleBookmark);
</script>
<!-- ================= HEADER SHRINK ================= -->
<script>
document.addEventListener("DOMContentLoaded", function () {

  /* =========================
     HEADER SHRINK + PADDING
  ========================== */

  const fixedHeader = document.querySelector(".fixed-top");
  const main = document.querySelector("main");

  function adjustMainPadding() {
    if (!fixedHeader || !main) return;
    main.style.paddingTop = fixedHeader.offsetHeight + 20 + "px";
  }

  function handleHeaderShrink() {
    if (!fixedHeader) return;
    fixedHeader.classList.toggle("shrink", window.scrollY > 80);
    adjustMainPadding();
  }

  window.addEventListener("scroll", handleHeaderShrink);
  window.addEventListener("resize", adjustMainPadding);
  adjustMainPadding();


  /* =========================
     SIDEBAR THÆ¯ VIá»†N (TRÃI)
  ========================== */

  const sidebar = document.getElementById("librarySidebar");
  const overlay = document.getElementById("overlay");
  const storyList = document.getElementById("storyList");
  const searchInput = document.getElementById("searchInput");

  function toggleLibrary() {
    if (!sidebar || !overlay) return;
    sidebar.classList.toggle("active");
    overlay.classList.toggle("active");
  }

  window.toggleLibrary = toggleLibrary;

  let storiesData = [];

  fetch("../../../stories.json")
    .then(res => res.json())
    .then(data => {
      storiesData = data;
      renderStories(data);
    })
    .catch(err => console.error("Lá»—i load stories.json:", err));

  function renderStories(data) {
    if (!storyList) return;

    storyList.innerHTML = "";

    const pathParts = window.location.pathname.split("/");
    const currentSlug = pathParts[2];

    data.forEach((story, index) => {
      const li = document.createElement("li");
      li.style.animationDelay = `${Math.min(index * 0.03, 0.3)}s`;

      const a = document.createElement("a");
      a.href = `/web-doc-truyen/stories/${story.slug}/`;
      a.textContent = `${story.title} (${story.chapters} chÆ°Æ¡ng)`;

      if (story.slug === currentSlug) {
        a.style.background = "#e0e7ff";
      }

      li.appendChild(a);
      storyList.appendChild(li);
    });
  }

  if (searchInput) {
    searchInput.addEventListener("input", function () {
      const keyword = this.value.toLowerCase();
      const filtered = storiesData.filter(story =>
        story.title.toLowerCase().includes(keyword)
      );
      renderStories(filtered);
    });
  }


  /* =========================
     SIDEBAR Má»¤C Lá»¤C CHÆ¯Æ NG (PHáº¢I)
  ========================== */

  const chapterSidebar = document.getElementById("chapterSidebar");
  const chapterOverlay = document.getElementById("chapterOverlay");
  const chapterList = document.getElementById("chapterList");

  function toggleChapterMenu() {
    if (!chapterSidebar || !chapterOverlay) return;
    chapterSidebar.classList.toggle("active");
    chapterOverlay.classList.toggle("active");
  }

  window.toggleChapterMenu = toggleChapterMenu;

  if (chapterList) {
    fetch("../index.html")
      .then(res => res.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");

        const toc = doc.querySelector(".content ul");
        if (!toc) return;

        const currentPage = window.location.pathname.split("/").pop();

        toc.querySelectorAll("li").forEach(li => {
          const a = li.querySelector("a");
          if (!a) return;

          let href = a.getAttribute("href");

          if (href.startsWith("chapter/")) {
            href = href.replace("chapter/", "");
          }

          const newLi = document.createElement("li");
          const newA = document.createElement("a");

          newA.href = href;
          newA.textContent = a.textContent;

          if (href === currentPage) {
            newA.style.background = "#e0e7ff";
          }

          newLi.appendChild(newA);
          chapterList.appendChild(newLi);
        });
      })
      .catch(err => console.error("KhÃ´ng load Ä‘Æ°á»£c má»¥c lá»¥c:", err));
  }

});
</script>
</body>
</html>
