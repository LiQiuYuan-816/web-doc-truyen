
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
 <title>ChÆ°Æ¡ng 21</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Serif&family=Playfair+Display:wght@600;700&display=swap"
    rel="stylesheet"
  >

  <!-- Style dÃ¹ng chung -->
  <link rel="stylesheet" href="../style.css">
</head>

<body class="page-chapter">
<body class="page-chapter">

  <!-- ===== NÃšT Má» THÆ¯ VIá»†N (TRÃI) ===== -->
  <div class="menu-toggle" onclick="toggleLibrary()">â˜°</div>

  <div class="overlay" id="overlay" onclick="toggleLibrary()"></div>

  <div class="library-sidebar" id="librarySidebar">
    <div class="library-header">
      ğŸ“š ThÆ° viá»‡n
      <span class="close-btn" onclick="toggleLibrary()">âœ•</span>
    </div>

    <input type="text" id="searchInput" placeholder="TÃ¬m truyá»‡n..." />
    <ul id="storyList"></ul>
  </div>


  <!-- ===== NÃšT Má» Má»¤C Lá»¤C (PHáº¢I) ===== -->
  <div class="chapter-menu-toggle" onclick="toggleChapterMenu()">ğŸ“‘</div>

  <div id="chapterOverlay" class="chapter-overlay" onclick="toggleChapterMenu()"></div>

  <div id="chapterSidebar" class="chapter-sidebar">
    <div class="chapter-sidebar-header">
      ğŸ“š Má»¥c lá»¥c
      <span class="close-btn" onclick="toggleChapterMenu()">âœ•</span>
    </div>

    <ul id="chapterList"></ul>
  </div>
<!-- ================= HEADER ================= -->
<div class="fixed-top">
  <div class="fixed-inner page-chapter">

    <!-- LEFT -->
    <div class="top-left">
      <a class="back-link" href="../index.html">ğŸ“‘ Má»¥c lá»¥c</a>
      <a class="back-link" href="../../../index.html">ğŸ  Trang chá»§</a>
      <a class="back-link" href="../../../thu-vien-ten/name-library.html">ğŸ“– ThÆ° viá»‡n tÃªn</a>
      <button id="bookmarkBtn" class="back-link">ğŸ“Œ Káº¹p sÃ¡ch</button>
    </div>
    <!-- CENTER -->
    <div class="novel-header top-center">
      <h1 class="novel-title">
        Sá»• Tay ChÄƒn NuÃ´i TrÃºc MÃ£ Cá»§a Kinomoto-Kun
      </h1>
      <div class="novel-meta">
        <span>ChÆ°Æ¡ng 21</span>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="top-right">
      <a class="back-link" href="chuong20.html">â® ChÆ°Æ¡ng trÆ°á»›c</a>
      <a class="back-link" href="chuong22.html">â­ ChÆ°Æ¡ng sau</a>
    </div>
  </div>
</div>

<!-- ================= CONTENT ================= -->
<main>
<div class="content chapter-content">

        <p>â€œNgÆ°Æ¡i nÃ³i cÃ¡i gÃ¬?â€</p>
        <p>Touya nghe Sakura lÃ m Æ¡n, nhÆ° lÃ  táº¡p mang giá»‘ng nhau tá»«ng Ä‘iá»ƒm tá»«ng Ä‘iá»ƒm, thong tháº£ xoay ngÆ°á»i cÃºi Ä‘áº§u nhÃ¬n chÄƒm chÃº chÃ­nh mÃ¬nh gia cáº£i tráº¯ng.</p>
        <p>â€œNgÆ°Æ¡i muá»‘n cÃ¹ng, cÃ¡i kia tiá»ƒu tá»­ thÃºi, tham gia thá»‹ tráº¥n Tomoeda giáº£i Ä‘á»‘ Ä‘áº¡i tÃ¡i?â€</p>
        <p>Touya tá»« hÃ m rÄƒng phÃ¹ng bÃ i trá»« nhá»¯ng lá»i nÃ y, táº­n lá»±c lÃ m chÃ­nh mÃ¬nh nhÃ¬n qua tÃ¢m bÃ¬nh khÃ­ hÃ²a.</p>
        <p>Sakura chá»›p chá»›p máº¯t: â€œBá»Ÿi vÃ¬ Tomoyo nÃ³i nÃ ng tÆ°á»Ÿng chá»¥p áº£nh, náº¿u cÃ¹ng nhau tham gia nÃ³i liá»n sáº½ máº¥t Ä‘i ráº¥t nhiá»u láº¡c thÃº, vá»«a váº·n LÃ½ quÃ¢n cÅ©ng cáº£m tháº¥y há»©ng thÃº, cho nÃªn ta liá»n má»i háº¯n cÃ¹ng nhau.â€</p>
        <p>Äang á»Ÿ phÃ²ng báº¿p xoÃ¡t chÃ©n Touya siáº¿t cháº·t trong tay giáº» lau, giá»‘ng nhÆ° lÃ  náº¯m nÃ o Ä‘Ã³ Ã½ Ä‘á»“ trá»™m gia tiá»ƒu quá»· cá»• Ã¡o: â€œVáº­y ngÆ°Æ¡i Ä‘i má»i Yuki khÃ´ng pháº£i Ä‘Æ°á»£c rá»“i.â€</p>
        <p>ThÆ°á»£ng má»™t láº§n, tiá»ƒu quÃ¡i thÃº khÃ´ng pháº£i cÅ©ng lÃ  cÃ¹ng Yuki cÃ¹ng Ä‘i sao?</p>
        <p>â€œAi?â€ Bá»‹ thÃ¬nh lÃ¬nh nháº¯c tá»›i Yukito, Sakura Ä‘á» máº·t lÃªn, sau Ä‘Ã³ tháº¹n thÃ¹ng nÃ³i, â€œYukito ca ca nÃ³i, loáº¡i nÃ y hoáº¡t Ä‘á»™ng khÃ´ng pháº£i kháº³ng Ä‘á»‹nh sáº½ cÃ¹ng ca ca á»Ÿ bÃªn nhau sao?â€</p>
        <p>Touya: â€œâ€¦â€¦â€</p>
        <p>Bá»‹ tháº­t Ä‘Ã¡nh tháº­t há»i trá»¥, hoÃ n toÃ n khÃ´ng biáº¿t nhÆ° tháº¿ nÃ o tráº£ lá»i, Touya hÃ­t sÃ¢u sau Ä‘Ã³ cháº­m rÃ£i phun ra khÃ­ tá»›i, quyáº¿t Ä‘á»‹nh á»Ÿ giáº£i Ä‘á»‘ Ä‘áº¡i tÃ¡i kiÃªm chá»©c trong lÃºc gáº¯t gao nhÃ¬n cháº±m cháº±m cÃ¡i kia xÃº tiá»ƒu quá»·.</p>
        <p>Háº¡ quyáº¿t tÃ¢m, Touya há»i Sakura: â€œCho nÃªn ngÆ°Æ¡i tá»›i tÃ¬m ta lÃ  muá»‘n lÃ m gÃ¬?â€</p>
        <p>Sakura ngÆ°á»£ng ngÃ¹ng mÃ  ngáº©ng Ä‘áº§u lÃªn, láº¥y lÃ²ng nÃ³i: â€œChÃºng ta chuáº©n bá»‹ xuyÃªn Ã¡o sÆ¡mi, LÃ½ quÃ¢n Ã¡o sÆ¡mi thÆ°á»£ng thÃªu tÃªn cá»§a mÃ¬nh, ta liá»n tÆ°á»Ÿngâ€¦â€¦â€</p>
        <p>Touya Ä‘Ã£ hiá»ƒu.</p>
        <p>. Sakura tÃ­nh tÃ¬nh cÃ³ chÃºt cáº©u tháº£, loáº¡i nÃ y viá»‡c may vÃ¡ luÃ´n luÃ´n khÃ´ng pháº£i thá»±c am hiá»ƒu.</p>
        <p>Touya Ä‘em trong tay giáº» lau váº¯t khÃ´, Ã¢m tráº¯c tráº¯c nÃ³i: â€œThÃªu tÃªn Ä‘Ãºng khÃ´ng? Ta nháº¥t Ä‘á»‹nh sáº½ khÃ´ng thua cáº¥p cÃ¡i kia tiá»ƒu quá»·!â€</p>
        <p>Sakura: â€œ?â€</p>
        <p>NhÆ° tháº¿ nÃ o liá»n tháº¯ng thua gÃ¬ Ä‘Ã³â€¦â€¦ Ãch, dÃ¹ sao, ca ca Ä‘Ã¡p á»©ng rá»“i nÃ³iâ€¦â€¦ Liá»n khÃ´ng thÃ nh váº¥n Ä‘á»â€¦â€¦ Äi?</p>
        <p>â€¦â€¦</p>
        <p>â€œCho nÃªn, Touya chuáº©n bá»‹ thÃªu cÃ¡i dáº¡ng gÃ¬ hoa vÄƒn Ä‘i lÃªn?â€</p>
        <p>Ngá»“i á»Ÿ Touya bÃªn ngÆ°á»i Yukito thÄƒm dÃ² Ä‘i xem trong tay háº¯n Ä‘á»“ thá»ƒ thao, khÃ³e máº¯t dÆ° quang láº¡i liáº¿c Ä‘áº¿n Touya Ä‘áº·t lÃªn bÃ n hoa vÃ i trang giáº¥y hoa anh Ä‘Ã o hÃ¬nh thá»©c.</p>
        <p>NÃ³i nhÆ° tháº¿ nÃ o Ä‘Ã¢uâ€¦â€¦ NhÃ¬n qua liá»n ráº¥t tinh xáº£o thá»±c khÃ´ng chá»‹u thua bá»™ dÃ¡ng Ä‘Ã¢u.</p>
        <p>Yukito cÆ°á»i tá»§m tá»‰m mÃ  tÆ°á»Ÿng.</p>
        <p>Sakura Ä‘á»“ thá»ƒ thao thá»±c mau thÃªu háº£o, Yukito nhÃ¬n cá»• Ã¡o thÆ°á»£ng dÃ¹ng hoa anh Ä‘Ã o cÃ¡nh hoa vÃ¢y quanh lÃªn ã•ãã‚‰, chá»‘ng máº·t nhá» giá»ng nÃ³i: â€œÄáº¹p.â€</p>
        <p>Touya thu tháº­p kim chá»‰ há»™p Ä‘á»™ng tÃ¡c má»™t Ä‘á»‘n, nhÃ¬n vá» phÃ­a Yukito: â€œThÃ­ch sao?â€</p>
        <p>â€œÃ‚n Ã¢n.â€ Yukito liÃªn tá»¥c gáº­t Ä‘áº§u.</p>
        <p>Touya: â€œLáº§n Ä‘Ã³ Ä‘áº§u cÃ³ thá»ƒ cho ta má»™t kiá»‡n ngÆ°Æ¡i quáº§n Ã¡o . tá»« tá»«!â€</p>
        <p>Yukito cá»Ÿi quáº§n Ã¡o Ä‘á»™ng tÃ¡c dá»«ng láº¡i, dÃ¹ng Ã¡nh máº¯t dÃ² há»i Touya.</p>
        <p>Touya tráº§m máº·c hai giÃ¢y, giÆ¡ tay tÃºm bÃªn cáº¡nh trÃªn giÆ°á»ng chÄƒn xuá»‘ng dÆ°á»›i Ä‘em Yuki-Usagi bá»c má»™t vÃ²ng, máº·t vÃ´ biá»ƒu tÃ¬nh nÃ³i: â€œHáº£o, thoÃ¡t Ä‘i.â€</p>
        <p>â€œHáº£o nga.â€</p>
        <p>Yukito cÆ°á»i Ä‘áº¿n cÃ ng thÃªm mi máº¯t cong cong, á»Ÿ chÄƒn phÃ­a dÆ°á»›i sá»™t sá»™t soáº¡t soáº¡t má»™t tráº­n, tráº¯ng nÃµn cÃ¡nh tay tá»« trong chÄƒn vÆ°Æ¡n tá»›i, Ä‘Æ°a cho Touya má»™t kiá»‡n mÃ u lam nháº¡t Ã¡o sÆ¡mi.</p>
        <p>Touya tiáº¿p nháº­n cÃ²n tÃ n lÆ°u chá»§ nhÃ¢n da thá»‹t Ä‘á»™ áº¥m Ã¡o sÆ¡mi, ngÃ³n tay cá»©ng Ä‘á» má»™t chÃºt, lÃºc nÃ y má»›i báº¯t Ä‘áº§u tá»± há»i muá»‘n á»Ÿ nÆ¡i nÃ o thÃªu Yukito tÃªn.</p>
        <p>Cuá»‘i cÃ¹ng tuyá»ƒn Ä‘á»‹nh trÆ°á»›c ngá»±c tÃºi vá»‹ trÃ­, Touya Ä‘á»‘i cÃ¡i kia á»Ÿ trÃªn cá»­a sá»• khÃ´ng tiáº¿ng Ä‘á»™ng viáº¿t quÃ¡ ráº¥t nhiá»u thá»© tÃªn sá»›m Ä‘Ã£ quen thuá»™c táº­n xÆ°Æ¡ng, tuyá»ƒn háº£o tuyáº¿n nhan sáº¯c liá»n báº¯t Ä‘áº§u Ä‘á»™ng thá»§.</p>
        <p>â€œSakura cÃ¹ng LÃ½ quÃ¢n quan há»‡ trá»Ÿ nÃªn tá»±a há»“ thá»±c háº£o Ä‘Ã¢u.â€</p>
        <p>Touya trÃªn tay chÃ¢m má»™t cÃ¡i khÃ´ng lÆ°u Ã½ Ä‘Ã¢m vÃ o Ä‘áº§u ngÃ³n tay, háº¯c máº·t: â€œKhÃ´ng cáº§n táº¡i Ä‘Ã¢y loáº¡i thá»i Ä‘iá»ƒm nÃ³i loáº¡i nÃ y lÃ m ngÆ°á»i khÃ³ chá»‹u nÃ³i.â€</p>
        <p>Huyáº¿t chÃ¢u tháº¥m ra tá»›i tháº¥m vÃ o Yukito Ä‘áº¡m sáº¯c Ã¡o sÆ¡mi thÆ°á»£ng, vá»«a lÃºc lÃ  ngá»±c tÃºi Ã¡o vá»‹ trÃ­.</p>
        <p>â€œA, sáº½ cÃ³ chÃºt khÃ´ng háº£o rá»­a sáº¡ch.â€</p>
        <p>â€œCÃ³ quan há»‡ gÃ¬ Ä‘Ã¢u? Ta nhÆ°ng tháº­t ra hy vá»ng nÃ³ vÄ©nh viá»…n sáº½ khÃ´ng phai mÃ u.â€ Yukito cÆ°á»i chá»‰ hÆ°á»›ng váº¿t mÃ¡u tháº¥m Ä‘i vÃ o Ä‘á»‹a phÆ°Æ¡ng, â€œNhÃ¬n qua giá»‘ng nhÆ° lÃ  má»™t lÃ²ng hÃ¬nh dáº¡ng, ráº¥t Ä‘áº¹p.â€</p>
        <p>Touya nhÆ°á»›ng mÃ y, rá»“i sau Ä‘Ã³ tháº­t sá»± dÃ¹ng ma lá»±c á»Ÿ kia chá»— áº¥n kÃ½ cÃ ng thÃªm cá»‘ máº¥y táº§ng: â€œHiá»‡n táº¡i nÃ³ Ä‘Ã­ch xÃ¡c sáº½ khÃ´ng phai mÃ u, khÃ´ng thá»ƒ há»‘i háº­n.â€</p>
        <p>â€œAi? Tháº­t váº­y chÄƒng?!â€ Yukito cÃºi ngÆ°á»i láº¡i Ä‘Ã¢y, nhÃ¬n kia vá»«a lÃºc dá»«ng á»Ÿ tÃªn bÃªn cáº¡nh tÃ¢m hÃ¬nh váº¿t mÃ¡u, Ä‘Ã´i máº¯t hÆ¡i hÆ¡i trá»«ng Ä‘áº¡i, â€œTháº­t lÃ  lá»£i háº¡i.â€</p>
        <p>â€¦â€¦</p>
        <p>Thá»‹ tráº¥n Tomoeda giáº£i Ä‘á»‘ Ä‘áº¡i tÃ¡i Ä‘Ãºng háº¡n cá»­ hÃ nh, bá»Ÿi vÃ¬ lá»… má»«ng thá»i Ä‘iá»ƒm ngÆ°á»i nhiá»u duyÃªn cá»›, Kero cÅ©ng khÃ´ng cÃ³ Ä‘i theo.</p>
        <p>MÃ n Ä‘Ãªm buÃ´ng xuá»‘ng, Kero Ä‘á»©ng á»Ÿ bÃªn cá»­a sá»• ngáº©ng Ä‘áº§u nhÃ¬n ngoÃ i cá»­a sá»• Ã¡nh trÄƒng.</p>
        <p>HÃ´m nay lÃ  trÄƒng trÃ²n, Ã¡nh trÄƒng ma lá»±c ráº¥t lÃ  cÆ°á»ng thá»‹nh.</p>
        <p>Touya thu phá»¥c tháº» bÃ i Clow Ä‘áº¡i Ä‘a sá»‘ Ä‘á»u thiÃªn hÆ°á»›ng nguyá»‡t chÃºc tÃ­nh, cÃ¡i nÃ y lÃ m cho hiá»‡n táº¡i nguyá»‡t ma lá»±c xa xa vÆ°á»£t qua sá»›m tá»‰nh láº¡i Cerberus.</p>
        <p>â€œÃnh trÄƒng ma lá»±c cÃ ng ngÃ y cÃ ng thá»‹nh.â€ Kero phÃ­a sau cÃ¡nh gá»¥c xuá»‘ng dÆ°á»›i, biá»ƒu tÃ¬nh cÃ³ chÃºt phÃ¡t sáº§u, â€œChÃ­nh lÃ  ta ma lá»±c cÃ²n khÃ´ng cÃ³ hoÃ n toÃ n khÃ´i phá»¥câ€¦â€¦â€</p>
        <p>CÃ²n nhÆ° váº­y Ä‘i xuá»‘ng nÃ³i, nguyá»‡t sáº½ trÆ°á»›c tiÃªn tá»‰nh láº¡i Ä‘iâ€¦â€¦</p>
        <p>Náº¿u trÃªn Ä‘á»i nÃ y cÃ³ ngÆ°á»i tá»« Ä‘Ã¡y lÃ²ng bÃ i xÃ­ch hÆ¡n ná»¯a khÃ´ng muá»‘n lÃ m tháº» bÃ i Clow cÃ¹ng ngÆ°á»i thá»§ há»™ cÃ³ Ä‘Æ°á»£c tÃ¢n chá»§ nhÃ¢n, kia nháº¥t Ä‘á»‹nh chÃ­nh lÃ  nguyá»‡t.</p>
        <p>Tháº» bÃ i Clow cÃ³ Ä‘Æ°á»£c tÃ¢n chá»§ nhÃ¢n, nhÆ° váº­y thay tháº¿ Ä‘Æ°á»£c Clow Reed, Ä‘á»‘i vá»›i nguyá»‡t tá»›i giáº£ng . cÆ¡ há»“ cÃ³ thá»ƒ nÃ³i lÃ  tháº¿ giá»›i sá»¥p xuá»‘ng tai náº¡n.</p>
        <p>-------------DFY--------------</p>











































































































































































































































































































































































































































































































































































<!-- ===== NAV DÆ¯á»šI ===== -->
<div class="nav">
      <a class="back-link" href="../index.html">ğŸ“‘ Má»¥c lá»¥c</a>
      <a class="back-link" href="../../../index.html">ğŸ  Trang chá»§</a>
      <a class="back-link" href="../../../thu-vien-ten/name-library.html">ğŸ“– ThÆ° viá»‡n tÃªn</a>
      <a class="back-link" href="chuong20.html">â® ChÆ°Æ¡ng trÆ°á»›c</a>
      <a class="back-link" href="chuong22.html">â­ ChÆ°Æ¡ng sau</a>
</div>
  </main>
<!-- ================= BOOKMARK ================= -->
<script>
const NOVEL_ID = "so-tay-chan-nuoi-truc-ma-cua-kinomoto-kun";
const NOVEL_TITLE = "Sá»• Tay ChÄƒn NuÃ´i TrÃºc MÃ£ Cá»§a Kinomoto-Kun";
const CHAPTER_TITLE = "ChÆ°Æ¡ng 21";
const btn = document.getElementById("bookmarkBtn");
function getBookmarks() {
  return JSON.parse(localStorage.getItem("bookmarks")) || {};
}
function isBookmarked() {
  return !!getBookmarks()[NOVEL_ID];
}
function updateButton() {
  const marked = isBookmarked();
  btn.textContent = marked ? "âœ… ÄÃ£ káº¹p" : "ğŸ“Œ Káº¹p sÃ¡ch";
  btn.classList.toggle("active", marked);
}
function toggleBookmark() {
  const bookmarks = getBookmarks();
  if (bookmarks[NOVEL_ID]) {
    delete bookmarks[NOVEL_ID];
    alert("âŒ ÄÃ£ bá» káº¹p sÃ¡ch");
  } else {
    bookmarks[NOVEL_ID] = {
      novelTitle: NOVEL_TITLE,
      chapterTitle: CHAPTER_TITLE,
      url: location.href,
      time: Date.now()
    };
    alert("ğŸ“Œ ÄÃ£ lÆ°u chÆ°Æ¡ng Ä‘ang Ä‘á»c");
  }
  localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
  updateButton();
}
updateButton();
btn.addEventListener("click", toggleBookmark);
</script>
<!-- ================= HEADER SHRINK ================= -->
<script>
document.addEventListener("DOMContentLoaded", function () {

  /* =========================
     HEADER SHRINK + PADDING
  ========================== */

  const fixedHeader = document.querySelector(".fixed-top");
  const main = document.querySelector("main");

  function adjustMainPadding() {
    if (!fixedHeader || !main) return;
    main.style.paddingTop = fixedHeader.offsetHeight + 20 + "px";
  }

  function handleHeaderShrink() {
    if (!fixedHeader) return;
    fixedHeader.classList.toggle("shrink", window.scrollY > 80);
    adjustMainPadding();
  }

  window.addEventListener("scroll", handleHeaderShrink);
  window.addEventListener("resize", adjustMainPadding);
  adjustMainPadding();


  /* =========================
     SIDEBAR THÆ¯ VIá»†N (TRÃI)
  ========================== */

  const sidebar = document.getElementById("librarySidebar");
  const overlay = document.getElementById("overlay");
  const storyList = document.getElementById("storyList");
  const searchInput = document.getElementById("searchInput");

  function toggleLibrary() {
    if (!sidebar || !overlay) return;
    sidebar.classList.toggle("active");
    overlay.classList.toggle("active");
  }

  window.toggleLibrary = toggleLibrary;

  let storiesData = [];

  fetch("../../../stories.json")
    .then(res => res.json())
    .then(data => {
      storiesData = data;
      renderStories(data);
    })
    .catch(err => console.error("Lá»—i load stories.json:", err));

  function renderStories(data) {
    if (!storyList) return;

    storyList.innerHTML = "";

    const pathParts = window.location.pathname.split("/");
    const currentSlug = pathParts[2];

    data.forEach((story, index) => {
      const li = document.createElement("li");
      li.style.animationDelay = `${Math.min(index * 0.03, 0.3)}s`;

      const a = document.createElement("a");
      a.href = `/web-doc-truyen/stories/${story.slug}/`;
      a.textContent = `${story.title} (${story.chapters} chÆ°Æ¡ng)`;

      if (story.slug === currentSlug) {
        a.style.background = "#e0e7ff";
      }

      li.appendChild(a);
      storyList.appendChild(li);
    });
  }

  if (searchInput) {
    searchInput.addEventListener("input", function () {
      const keyword = this.value.toLowerCase();
      const filtered = storiesData.filter(story =>
        story.title.toLowerCase().includes(keyword)
      );
      renderStories(filtered);
    });
  }


  /* =========================
     SIDEBAR Má»¤C Lá»¤C CHÆ¯Æ NG (PHáº¢I)
  ========================== */

  const chapterSidebar = document.getElementById("chapterSidebar");
  const chapterOverlay = document.getElementById("chapterOverlay");
  const chapterList = document.getElementById("chapterList");

  function toggleChapterMenu() {
    if (!chapterSidebar || !chapterOverlay) return;
    chapterSidebar.classList.toggle("active");
    chapterOverlay.classList.toggle("active");
  }

  window.toggleChapterMenu = toggleChapterMenu;

  if (chapterList) {
    fetch("../index.html")
      .then(res => res.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");

        const toc = doc.querySelector(".content ul");
        if (!toc) return;

        const currentPage = window.location.pathname.split("/").pop();

        toc.querySelectorAll("li").forEach(li => {
          const a = li.querySelector("a");
          if (!a) return;

          let href = a.getAttribute("href");

          if (href.startsWith("chapter/")) {
            href = href.replace("chapter/", "");
          }

          const newLi = document.createElement("li");
          const newA = document.createElement("a");

          newA.href = href;
          newA.textContent = a.textContent;

          if (href === currentPage) {
            newA.style.background = "#e0e7ff";
          }

          newLi.appendChild(newA);
          chapterList.appendChild(newLi);
        });
      })
      .catch(err => console.error("KhÃ´ng load Ä‘Æ°á»£c má»¥c lá»¥c:", err));
  }

});
</script>
</body>
</html>
